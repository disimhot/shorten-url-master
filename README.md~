# Сервис для сокращения ссылок

------

API сервиса помогает сократить ссылки пользователям, предоставляет информацию по short codes, а также умеет удалять
ссылки, которые долго не были использованы.

------

Ссылка на сервис: [https://short-url-service.onrender.com](https://short-url-service.onrender.com)

Render не поддерживает docker-compose, поэтому работа сервиса продемонстрирована
[демонстрация](#Демонстрация)

-----

### Установка:

1. Установить все зависимости pip install -r requirements.txt
2. Запустить docker-compose up

-----

### Конфигурация

1. Версия Python 3.12
2. База данных: postgresql. Создаются три таблицы User, Link, LinkArchive для хранения информации по пользователям,
   линкам и удаленным линкам.
3. Распределенная система: Celery. Создается Celery-таска для удаления неиспользуемых ссылок.
4. База данных Redis для кэширования запросов.

------

## Инструкция

1. [API сервиса](#API-сервиса)
2. [Тесты API](#Тесты-API)

## API сервиса

1. Создание пользователя. Пароль хэшируется и в таком виде хранится в БД. Пользователю выдается access_token в cookie.\
   **Метод** `POST /auth/register`\
   Параметры:

```
{
  "username": "string",
  "email": "string",
  "password": "string"
}
```

Ответ:

```
{
  "access_token": "string",
  "token_type": "string"
}
```

2. Аутентификация пользователя. Верифицируется acess_token 
   **Метод** `POST /auth/login`\
   Параметры:

```
{
  "username": "string",
  "email": "string",
  "password": "string"
}
```

Ответ:

```
{
  "access_token": "string",
  "token_type": "string"
}
```

3. Выход из системы => POST /auth/logout
4. Проверка информации пользователя => GET /auth/info

## Демонстрация